(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06ed50ac"],{"1dde":function(t,e,a){var n=a("d039"),c=a("b622"),s=a("2d00"),o=c("species");t.exports=function(t){return s>=51||!n((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,a){var n=a("861d"),c=a("e8b5"),s=a("b622"),o=s("species");t.exports=function(t,e){var a;return c(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!c(a.prototype)?n(a)&&(a=a[o],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},8418:function(t,e,a){"use strict";var n=a("c04e"),c=a("9bf2"),s=a("5c6c");t.exports=function(t,e,a){var o=n(e);o in t?c.f(t,o,s(0,a)):t[o]=a}},"99af":function(t,e,a){"use strict";var n=a("23e7"),c=a("d039"),s=a("e8b5"),o=a("861d"),r=a("7b0b"),l=a("50c4"),i=a("8418"),u=a("65f0"),d=a("1dde"),b=a("b622"),f=a("2d00"),m=b("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",O=f>=51||!c((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),j=d("concat"),h=function(t){if(!o(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)},v=!O||!j;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,a,n,c,s,o=r(this),d=u(o,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(s=-1===e?o:arguments[e],h(s)){if(c=l(s.length),b+c>g)throw TypeError(p);for(a=0;a<c;a++,b++)a in s&&i(d,b,s[a])}else{if(b>=g)throw TypeError(p);i(d,b++,s)}return d.length=b,d}})},b0c0:function(t,e,a){var n=a("83ab"),c=a("9bf2").f,s=Function.prototype,o=s.toString,r=/^\s*function ([^ (]*)/,l="name";n&&!(l in s)&&c(s,l,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(t){return""}}})},b789:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=a("7a23"),c={class:"text-end pt-3"},s={class:"table align-middle"},o=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th"),Object(n["g"])("th",null,"品名"),Object(n["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["g"])("th",null,"單價")])],-1),r={key:0,class:"fas fa-spinner fa-pulse"},l=Object(n["f"])(" x "),i={class:"input-group input-group-sm"},u={class:"input-group mb-3"},d=Object(n["g"])("span",{class:"input-group-text",id:"basic-addon2"},null,-1),b={class:"text-end"},f=Object(n["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),m={class:"text-end"},g=Object(n["g"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),p={class:"text-end text-success"},O={class:"my-5 row justify-content-center"},j={class:"mb-3"},h=Object(n["g"])("label",{for:"email",class:"form-label"},"Email",-1),v={class:"mb-3"},y=Object(n["g"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),x={class:"mb-3"},k=Object(n["g"])("label",{for:"address",class:"form-label"},"電話",-1),C={class:"mb-3"},V=Object(n["g"])("label",{for:"address",class:"form-label"},"收件人地址",-1),w={class:"mb-3"},S=Object(n["g"])("label",{for:"message",class:"form-label"},"留言",-1),A=Object(n["g"])("div",{class:"text-end"},[Object(n["g"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function I(t,e,a,I,U,q){var $=Object(n["x"])("Field"),E=Object(n["x"])("error-message"),_=Object(n["x"])("Form");return Object(n["s"])(),Object(n["d"])("div",null,[Object(n["g"])("div",c,[Object(n["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(){return q.cleanCarts&&q.cleanCarts.apply(q,arguments)})},"清空購物車")]),Object(n["g"])("table",s,[o,Object(n["g"])("tbody",null,[U.carts.carts?(Object(n["s"])(!0),Object(n["d"])(n["a"],{key:0},Object(n["w"])(U.carts.carts,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{key:t},[Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return q.cleanOne(t)}},[U.loadingStatus.loadingItem===t.product_id?(Object(n["s"])(),Object(n["d"])("i",r)):Object(n["e"])("",!0),l],8,["onClick"])]),Object(n["g"])("td",null,Object(n["A"])(t.product.title),1),Object(n["g"])("td",null,[Object(n["g"])("div",i,[Object(n["g"])("div",u,[Object(n["H"])(Object(n["g"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return q.updateCart(t)},disabled:U.loadingStatus.loadingItem===t.id},null,40,["onUpdate:modelValue","onChange","disabled"]),[[n["D"],t.qty,void 0,{number:!0}]]),d])])]),Object(n["g"])("td",b,Object(n["A"])(t.total),1)])})),128)):Object(n["e"])("",!0)]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[f,Object(n["g"])("td",m,Object(n["A"])(U.carts.total),1)]),Object(n["g"])("tr",null,[g,Object(n["g"])("td",p,Object(n["A"])(U.carts.final_total),1)])])]),Object(n["g"])("div",O,[Object(n["g"])(_,{ref:"form",class:"col-md-6",onSubmit:q.onSubmit},{default:Object(n["G"])((function(t){var a=t.errors;return[Object(n["g"])("div",j,[h,Object(n["g"])($,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":a["email"]}],rules:"email|required",placeholder:"請輸入 Email",modelValue:U.form.user.email,"onUpdate:modelValue":e[2]||(e[2]=function(t){return U.form.user.email=t})},null,8,["class","modelValue"]),Object(n["g"])(E,{name:"email",class:"invalid-feedback"})]),Object(n["g"])("div",v,[y,Object(n["g"])($,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":a["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:U.form.user.name,"onUpdate:modelValue":e[3]||(e[3]=function(t){return U.form.user.name=t})},null,8,["class","modelValue"]),Object(n["g"])(E,{name:"姓名",class:"invalid-feedback"})]),Object(n["g"])("div",x,[k,Object(n["g"])($,{id:"address",name:"電話",type:"text",class:["form-control",{"is-invalid":a["電話"]}],placeholder:"請輸入電話",rules:q.isPhone,modelValue:U.form.user.tel,"onUpdate:modelValue":e[4]||(e[4]=function(t){return U.form.user.tel=t})},null,8,["class","rules","modelValue"]),Object(n["g"])(E,{name:"電話",class:"invalid-feedback"})]),Object(n["g"])("div",C,[V,Object(n["g"])($,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:U.form.user.address,"onUpdate:modelValue":e[5]||(e[5]=function(t){return U.form.user.address=t})},null,8,["class","modelValue"]),Object(n["g"])(E,{name:"地址",class:"invalid-feedback"})]),Object(n["g"])("div",w,[S,Object(n["H"])(Object(n["g"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[6]||(e[6]=function(t){return U.message=t})},null,512),[[n["D"],U.message]])]),A]})),_:1},8,["onSubmit"])])])}a("99af");var U={data:function(){return{carts:{},loadingStatus:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""}},message:""}},methods:{getCartInfo:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/api","/").concat("kevinhes-apistudy","/cart");this.$http.get(e).then((function(e){e.data.success?t.carts=e.data.data:alert(e.data.message)}))},updateCart:function(t){var e=this,a={product_id:t.product.id,qty:t.qty},n="".concat("https://vue3-course-api.hexschool.io/api","/").concat("kevinhes-apistudy","/cart/").concat(t.id);this.loadingStatus.loadingItem=t.id,console.log(a),this.$http.put(n,{data:a}).then((function(t){t.data.success&&(alert(t.data.message),e.loadingStatus.loadingItem="",e.getCartInfo())}))},cleanCarts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/api","/").concat("kevinhes-apistudy","/carts");this.$http.delete(e).then((function(e){e.data.success&&(alert(e.data.message),t.getCartInfo())}))},cleanOne:function(t){var e=this,a="".concat("https://vue3-course-api.hexschool.io/api","/").concat("kevinhes-apistudy","/cart/").concat(t.id);this.$http.delete(a).then((function(t){t.data.success&&(alert(t.data.message),e.getCartInfo())}))},isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},onSubmit:function(){var t=this.form;this.$http.post("".concat(this.apiUrl,"/").concat(this.apiPath,"/order"),{data:t}).then((function(t){t.data.success&&alert(t.data.message)}))}},mounted:function(){this.getCartInfo()}};U.render=I;e["default"]=U},e8b5:function(t,e,a){var n=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-06ed50ac.81027909.js.map